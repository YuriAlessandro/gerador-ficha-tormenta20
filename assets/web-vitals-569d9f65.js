var s,l,C,h,u=function(n,e){return{name:n,value:e===void 0?-1:e,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},g=function(n,e){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var i=new PerformanceObserver(function(r){return r.getEntries().map(e)});return i.observe({type:n,buffered:!0}),i}}catch{}},T=!1,y=function(n,e){T||typeof InstallTrigger<"u"||(addEventListener("beforeunload",function(){}),T=!0),addEventListener("visibilitychange",function i(r){document.visibilityState==="hidden"&&(n(r),e&&removeEventListener("visibilitychange",i,!0))},!0)},S=function(n){addEventListener("pageshow",function(e){e.persisted&&n(e)},!0)},m=typeof WeakSet=="function"?new WeakSet:new Set,f=function(n,e,i){var r;return function(){e.value>=0&&(i||m.has(e)||document.visibilityState==="hidden")&&(e.delta=e.value-(r||0),(e.delta||r===void 0)&&(r=e.value,n(e)))}},q=function(n,e){var i,r=u("CLS",0),t=function(a){a.hadRecentInput||(r.value+=a.value,r.entries.push(a),i())},o=g("layout-shift",t);o&&(i=f(n,r,e),y(function(){o.takeRecords().map(t),i()}),S(function(){r=u("CLS",0),i=f(n,r,e)}))},p=-1,w=function(){return document.visibilityState==="hidden"?0:1/0},b=function(){y(function(n){var e=n.timeStamp;p=e},!0)},E=function(){return p<0&&(p=w(),b(),S(function(){setTimeout(function(){p=w(),b()},0)})),{get timeStamp(){return p}}},A=function(n,e){var i,r=E(),t=u("FCP"),o=g("paint",function(a){a.name==="first-contentful-paint"&&(o&&o.disconnect(),a.startTime<r.timeStamp&&(t.value=a.startTime,t.entries.push(a),m.add(t),i()))});o&&(i=f(n,t,e),S(function(a){t=u("FCP"),i=f(n,t,e),requestAnimationFrame(function(){requestAnimationFrame(function(){t.value=performance.now()-a.timeStamp,m.add(t),i()})})}))},v={passive:!0,capture:!0},D=new Date,F=function(n,e){s||(s=e,l=n,C=new Date,P(removeEventListener),k())},k=function(){if(l>=0&&l<C-D){var n={entryType:"first-input",name:s.type,target:s.target,cancelable:s.cancelable,startTime:s.timeStamp,processingStart:s.timeStamp+l};h.forEach(function(e){e(n)}),h=[]}},I=function(n){if(n.cancelable){var e=(n.timeStamp>1e12?new Date:performance.now())-n.timeStamp;n.type=="pointerdown"?function(i,r){var t=function(){F(i,r),a()},o=function(){a()},a=function(){removeEventListener("pointerup",t,v),removeEventListener("pointercancel",o,v)};addEventListener("pointerup",t,v),addEventListener("pointercancel",o,v)}(e,n):F(e,n)}},P=function(n){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return n(e,I,v)})},R=function(n,e){var i,r=E(),t=u("FID"),o=function(c){c.startTime<r.timeStamp&&(t.value=c.processingStart-c.startTime,t.entries.push(c),m.add(t),i())},a=g("first-input",o);i=f(n,t,e),a&&y(function(){a.takeRecords().map(o),a.disconnect()},!0),a&&S(function(){var c;t=u("FID"),i=f(n,t,e),h=[],l=-1,s=null,P(addEventListener),c=o,h.push(c),k()})},B=function(n,e){var i,r=E(),t=u("LCP"),o=function(d){var L=d.startTime;L<r.timeStamp&&(t.value=L,t.entries.push(d)),i()},a=g("largest-contentful-paint",o);if(a){i=f(n,t,e);var c=function(){m.has(t)||(a.takeRecords().map(o),a.disconnect(),m.add(t),i())};["keydown","click"].forEach(function(d){addEventListener(d,c,{once:!0,capture:!0})}),y(c,!0),S(function(d){t=u("LCP"),i=f(n,t,e),requestAnimationFrame(function(){requestAnimationFrame(function(){t.value=performance.now()-d.timeStamp,m.add(t),i()})})})}},M=function(n){var e,i=u("TTFB");e=function(){try{var r=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,o={entryType:"navigation",startTime:0};for(var a in t)a!=="navigationStart"&&a!=="toJSON"&&(o[a]=Math.max(t[a]-t.navigationStart,0));return o}();i.value=i.delta=r.responseStart,i.entries=[r],n(i)}catch{}},document.readyState==="complete"?setTimeout(e,0):addEventListener("pageshow",e)};export{q as getCLS,A as getFCP,R as getFID,B as getLCP,M as getTTFB};
